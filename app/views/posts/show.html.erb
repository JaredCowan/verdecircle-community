<div class="panel panel-default">
  <div class="panel-heading">
    <span>Post Form</span>
    <span class="pull-right">
      <% if user_signed_in? %>
        <%= link_to "Favorite Post", favorite_post_path(@post.id), method: :put, class: "fa fa-star" %>
        <%= link_to "Remove Favorite", unfavorite_post_path(@post.id), method: :delete, class: "fa fa-star" %>
      <% end %>
    </span>
  </div>
  <div class="panel-body">
    <%= @post.subject %>
    <%= @post.body %>
  </div>
</div>
<% @post.taggings.each do |t| %>
  <% name = Tag.find(t.tag_id).name %>
  <%= link_to name, tag_path(name) %>
<% end %>

<% if @post.image? %>
  <div class="panel panel-default">
    <div class="panel-heading">
      <div class="checkbox">
        <span>Image</span>
      </div>
    </div>
    <div class="panel-body">
      <%= image_tag(@post.image.url, class: "img-responsive img-rounded", alt: "Responsive image") %>
    </div>
  </div>
<% end %>
<div class="panel panel-default">
    <div class="panel-heading">
      <%# if user_signed_in? %>
        <%# if hidden_logic(@post)[:like] %>
          <%#= link_to "Like", like_post_path(@post), method: :put %>
        <%# else %>
          <%#= link_to "UnLike", unlike_post_path(@post), method: :put %>
        <%# end %>
        <%# if hidden_logic(@post)[:dislike] %>
          <%#= link_to "DisLike", dislike_post_path(@post), method: :put %>
        <%# else %>
          <%#= link_to "Undislike", undislike_post_path(@post), method: :put %>
        <%# end %>
      <%# end %>
      <h4 id="comments-count">
        <%= I18n.t("comments", count: @post.comments.count) %>
        <%#= pluralize(@post.comments.length, 'Comment') %>
      </h4>
  </div>
</div>
<% if user_signed_in? && @post.comments.length > 15 %>
  <div id="comment-form">
    <%= render 'comments/comment_form' %>
  </div>
<% end %>

<div id="comments-list">
  <%= render partial: @post.reload.comments %>
</div>

<% if user_signed_in? %>
  <div id="comment-form">
    <%= render 'comments/comment_form' %>
  </div>

  <%= link_to 'Edit', edit_post_path(@post) %> |
  <%= link_to 'Back', posts_path %> |
  <%= link_to I18n.t("confirm.delete.title"), post_path(@post), method: :delete, data: { confirm: I18n.t("confirm.basic") } %> |
  <%= link_to I18n.t("confirm.soft-delete.title"), post_path(@post), method: :delete, data: { confirm: I18n.t("confirm.soft-delete.message") } %>
  | <%= link_to I18n.t("confirm.hard-delete.title"), super_delete_post_path(@post.id), method: :delete, data: { confirm: I18n.t("confirm.hard-delete.message"), confirm_modal: "#delete-post"} %>
  <%= render 'layouts/destroy_modal', id: 'delete-post', i18n_prefix: 'confirm.destroy' %>
<% end %>
