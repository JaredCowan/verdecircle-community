<% view = params[:tag] ? @posttag : @posts %>

<% content_for :welcome do %>
  <%= render partial: "partials/welcome" %>
<% end %>

<% if user_signed_in? %>
  <div class="text-center">
    <%= link_to "New Post", new_post_path, class: "btn btn-primary" %>
  </div>
<% end %>

<% if params[:tag] %>
  <div class="alert alert-info">
    <%= "You're viewing post tagged with '#{params[:tag]}'" %> <%= link_to("Back to view all posts", posts_path, class: "pull-right") %>
  </div>
<% end %>

<% view.each do |p| %>
  <%= render partial: "media", locals: { post: p } %>
<% end %>

<% unless params[:tag] %>
  <%= paginate @posts %>
<% end %>
