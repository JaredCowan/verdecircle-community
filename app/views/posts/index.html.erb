<div class="form-group">
  <%= link_to("New Post", new_post_path , class: "btn btn-primary") %>
</div>
<br>
<% @posts.each do |p| %>
  <div class="panel panel-default" id="<%= p.id %>">
    <div class="panel-heading">
      <%= prettyname(p) %> <%= prettytitle(p) %> <span class="pull-right"><%= p.created_at.strftime("Posted at %l:%M %P") %></span>
    </div>
    <div class="panel-body">
      <%= p.body %>
      <% if p.image? %>
        <br><%= image_tag(p.image.url, class: "img-responsive", alt: "Forum Image") %><br>
      <% end %>
      <% if user_signed_in? %>
        <% if hidden_logic(p)[:like] %>
          <%= link_to "Like", like_post_path(p), method: :put %>
        <% else %>
          <%= link_to "UnLike", unlike_post_path(p), method: :put %>
        <% end %>
        <% if hidden_logic(p)[:dislike] %>
          <%= link_to "DisLike", dislike_post_path(p), method: :put %>
        <% else %>
          <%= link_to "Undislike", undislike_post_path(p), method: :put %>
        <% end %>
      <% end %>
    </div>
    <div class="panel-heading">
      <% if user_signed_in? && current_user == p.user %>
        <%= link_to 'Edit', edit_post_path(p) %> |
        <%= link_to 'Destroy', post_path(p), method: :delete, data: { confirm: 'Are you sure?' } %>
        <% if p.versions.all.count > 0 %>
          <%= link_to("undo", revert_version_path(p.versions.last), :method => :post) %>
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>
